{"ast":null,"code":"import React from \"react\";\nvar __jsx = React.createElement;\n// Dependnencies\nimport { useMutation } from '@apollo/react-hooks'; // Helpers\n\nimport { REMOVE_ITEM_MUTATION } from '../lib/mutations';\nimport { ALL_ITEMS_QUERY } from '../lib/queries'; // Styles\n\nimport { List, ListItem, SimpleGrid, Heading } from '@chakra-ui/core'; // Components\n\nimport Item from './Item';\n\nconst GroceryList = ({\n  items,\n  loading,\n  error\n}) => {\n  const [deleteItem, deleteRes] = useMutation(REMOVE_ITEM_MUTATION, {\n    update(cache, {\n      data: {\n        deleteItem\n      }\n    }) {\n      const {\n        items: {\n          nodes\n        }\n      } = cache.readQuery({\n        query: ALL_ITEMS_QUERY\n      });\n      const {\n        id\n      } = deleteItem.item;\n      cache.writeQuery({\n        query: ALL_ITEMS_QUERY,\n        data: {\n          items: {\n            nodes: nodes.filter(node => node.id !== id)\n          }\n        }\n      });\n    }\n\n  });\n\n  const handleClick = id => {\n    deleteItem({\n      variables: {\n        input: {\n          id\n        }\n      }\n    });\n  };\n\n  if (error) return __jsx(\"p\", null, \"Error: \", error);\n\n  if (!loading && items && items.length > 0) {\n    return __jsx(List, {\n      width: \"60%\",\n      maxWidth: \"500px\",\n      minWidth: \"300px\",\n      margin: \"auto\"\n    }, __jsx(ListItem, {\n      paddingBottom: \"0.5rem\"\n    }, __jsx(SimpleGrid, {\n      columns: \"3\"\n    }, __jsx(Heading, {\n      as: \"h4\",\n      size: \"lg\"\n    }, \"Item\"), __jsx(Heading, {\n      as: \"h4\",\n      size: \"lg\"\n    }, \"Quantity\"))), items.map(item => __jsx(Item, {\n      key: item.id + item.product,\n      id: item.id,\n      product: item.product,\n      quantity: item.quantity,\n      handleClick: handleClick\n    })));\n  } else {\n    return __jsx(Heading, {\n      as: \"h4\",\n      size: \"lg\"\n    }, \"No groceries.\");\n  }\n};\n\nexport default GroceryList;","map":null,"metadata":{},"sourceType":"module"}