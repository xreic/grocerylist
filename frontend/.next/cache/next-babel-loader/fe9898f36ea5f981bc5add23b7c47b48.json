{"ast":null,"code":"import _slicedToArray from \"@babel/runtime/helpers/esm/slicedToArray\";\n\nvar _this = this,\n    _jsxFileName = \"F:\\\\Work\\\\Projects\\\\Grocery List\\\\frontend\\\\components\\\\GroceryList.js\",\n    _s = $RefreshSig$();\n\nimport React from \"react\";\nvar __jsx = React.createElement;\n// Dependnencies\nimport { useMutation, useQuery } from '@apollo/react-hooks'; // Helpers\n\nimport { ALL_ITEMS_QUERY } from '../lib/apollo/queries';\nimport { REMOVE_ITEM_MUTATION } from '../lib/apollo/mutations'; // Styles\n\nimport { Heading, List, ListItem, Skeleton, SimpleGrid, Stack } from '@chakra-ui/core'; // Components\n\nimport Item from './Item';\nimport GroceryListLayout from './layouts/GroceryListLayout';\n\nvar GroceryList = function GroceryList() {\n  _s();\n\n  // Apollo\n  var _useQuery = useQuery(ALL_ITEMS_QUERY),\n      data = _useQuery.data,\n      loading = _useQuery.loading,\n      error = _useQuery.error;\n\n  var _useMutation = useMutation(REMOVE_ITEM_MUTATION, {\n    update: function update(cache, _ref) {\n      var deleteItem = _ref.data.deleteItem;\n\n      var _cache$readQuery = cache.readQuery({\n        query: ALL_ITEMS_QUERY\n      }),\n          nodes = _cache$readQuery.items.nodes;\n\n      var id = deleteItem.item.id;\n      cache.writeQuery({\n        query: ALL_ITEMS_QUERY,\n        data: {\n          items: {\n            nodes: nodes.filter(function (node) {\n              return node.id !== id;\n            })\n          }\n        }\n      });\n    }\n  }),\n      _useMutation2 = _slicedToArray(_useMutation, 2),\n      deleteItem = _useMutation2[0],\n      deleteRes = _useMutation2[1]; // Handlers\n\n\n  var handleClick = function handleClick(id) {\n    deleteItem({\n      variables: {\n        input: {\n          id: id\n        }\n      }\n    });\n  };\n\n  if (error) console.log('error:', JSON.parse(JSON.stringify(error)));\n  var loadingV2 = true;\n  if (loadingV2) return __jsx(Stack, {\n    width: \"60%\",\n    maxWidth: \"500px\",\n    minWidth: \"300px\",\n    margin: \"auto\",\n    spacing: \"0.5rem\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 50,\n      columnNumber: 7\n    }\n  }, __jsx(Heading, {\n    as: \"h4\",\n    size: \"lg\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 57,\n      columnNumber: 9\n    }\n  }, \"Loading...\"), __jsx(Skeleton, {\n    borderRadius: \"\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 60,\n      columnNumber: 9\n    }\n  }, \"Placeholder\"), __jsx(Skeleton, {\n    borderRadius: \"\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 61,\n      columnNumber: 9\n    }\n  }, \"Placeholder\"), __jsx(Skeleton, {\n    borderRadius: \"\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 62,\n      columnNumber: 9\n    }\n  }, \"Placeholder\"), __jsx(Skeleton, {\n    borderRadius: \"\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 63,\n      columnNumber: 9\n    }\n  }, \"Placeholder\"));\n\n  if (!loading && !error && data.items.nodes && data.items.nodes.length > 0) {\n    return __jsx(React.Fragment, {\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 69,\n        columnNumber: 7\n      }\n    }, __jsx(GroceryListLayout, {\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 71,\n        columnNumber: 9\n      }\n    }, data.items.nodes.map(function (item) {\n      return __jsx(Item, {\n        key: item.id + item.product,\n        id: item.id,\n        product: item.product,\n        quantity: item.quantity,\n        handleClick: handleClick,\n        __self: _this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 73,\n          columnNumber: 13\n        }\n      });\n    })));\n  } else {\n    return __jsx(React.Fragment, {\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 86,\n        columnNumber: 7\n      }\n    }, __jsx(Heading, {\n      as: \"h4\",\n      size: \"lg\",\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 88,\n        columnNumber: 9\n      }\n    }, \"No groceries.\"));\n  }\n};\n\n_s(GroceryList, \"E3tadQ8MiuQT+LlLPZg9RFtEKJI=\", false, function () {\n  return [useQuery, useMutation];\n});\n\n_c = GroceryList;\nexport default GroceryList;\n\nvar _c;\n\n$RefreshReg$(_c, \"GroceryList\");","map":{"version":3,"sources":["F:/Work/Projects/Grocery List/frontend/components/GroceryList.js"],"names":["useMutation","useQuery","ALL_ITEMS_QUERY","REMOVE_ITEM_MUTATION","Heading","List","ListItem","Skeleton","SimpleGrid","Stack","Item","GroceryListLayout","GroceryList","data","loading","error","update","cache","deleteItem","readQuery","query","nodes","items","id","item","writeQuery","filter","node","deleteRes","handleClick","variables","input","console","log","JSON","parse","stringify","loadingV2","length","map","product","quantity"],"mappings":"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","sourcesContent":["// Dependnencies\nimport { useMutation, useQuery } from '@apollo/react-hooks';\n\n// Helpers\nimport { ALL_ITEMS_QUERY } from '../lib/apollo/queries';\nimport { REMOVE_ITEM_MUTATION } from '../lib/apollo/mutations';\n\n// Styles\nimport {\n  Heading,\n  List,\n  ListItem,\n  Skeleton,\n  SimpleGrid,\n  Stack\n} from '@chakra-ui/core';\n\n// Components\nimport Item from './Item';\nimport GroceryListLayout from './layouts/GroceryListLayout';\n\nconst GroceryList = () => {\n  // Apollo\n  const { data, loading, error } = useQuery(ALL_ITEMS_QUERY);\n  const [deleteItem, deleteRes] = useMutation(REMOVE_ITEM_MUTATION, {\n    update(cache, { data: { deleteItem } }) {\n      const {\n        items: { nodes }\n      } = cache.readQuery({ query: ALL_ITEMS_QUERY });\n\n      const { id } = deleteItem.item;\n      cache.writeQuery({\n        query: ALL_ITEMS_QUERY,\n        data: { items: { nodes: nodes.filter((node) => node.id !== id) } }\n      });\n    }\n  });\n\n  // Handlers\n  const handleClick = (id) => {\n    deleteItem({ variables: { input: { id } } });\n  };\n\n  if (error) console.log('error:', JSON.parse(JSON.stringify(error)));\n\n  const loadingV2 = true;\n\n  if (loadingV2)\n    return (\n      <Stack\n        width=\"60%\"\n        maxWidth=\"500px\"\n        minWidth=\"300px\"\n        margin=\"auto\"\n        spacing=\"0.5rem\"\n      >\n        <Heading as=\"h4\" size=\"lg\">\n          Loading...\n        </Heading>\n        <Skeleton borderRadius=\"\">Placeholder</Skeleton>\n        <Skeleton borderRadius=\"\">Placeholder</Skeleton>\n        <Skeleton borderRadius=\"\">Placeholder</Skeleton>\n        <Skeleton borderRadius=\"\">Placeholder</Skeleton>\n      </Stack>\n    );\n\n  if (!loading && !error && data.items.nodes && data.items.nodes.length > 0) {\n    return (\n      <React.Fragment>\n        {/* <p>Error: {error.message}</p> */}\n        <GroceryListLayout>\n          {data.items.nodes.map((item) => (\n            <Item\n              key={item.id + item.product}\n              id={item.id}\n              product={item.product}\n              quantity={item.quantity}\n              handleClick={handleClick}\n            />\n          ))}\n        </GroceryListLayout>\n      </React.Fragment>\n    );\n  } else {\n    return (\n      <React.Fragment>\n        {/* <p>Error: {error.message}</p> */}\n        <Heading as=\"h4\" size=\"lg\">\n          No groceries.\n        </Heading>\n      </React.Fragment>\n    );\n  }\n};\n\nexport default GroceryList;\n"]},"metadata":{},"sourceType":"module"}