{"ast":null,"code":"import _slicedToArray from \"@babel/runtime/helpers/esm/slicedToArray\";\n\nvar _this = this,\n    _jsxFileName = \"F:\\\\Work\\\\Projects\\\\Grocery List\\\\frontend\\\\components\\\\GroceryList.js\",\n    _s = $RefreshSig$();\n\nimport React from \"react\";\nvar __jsx = React.createElement;\nimport { useQuery, useMutation } from '@apollo/react-hooks';\nimport { REMOVE_ITEM_MUTATION } from '../lib/mutations';\nimport { ALL_ITEMS_QUERY } from '../lib/queries';\nimport { List, ListItem, SimpleGrid, Heading } from '@chakra-ui/core';\nimport Item from './Item';\n\nvar GroceryList = function GroceryList() {\n  _s();\n\n  var _data, _data$items;\n\n  var _useMutation = useMutation(REMOVE_ITEM_MUTATION, {\n    update: function update(cache, _ref) {\n      var deleteItem = _ref.data.deleteItem;\n\n      var _cache$readQuery = cache.readQuery({\n        query: ALL_ITEMS_QUERY\n      }),\n          nodes = _cache$readQuery.items.nodes;\n\n      var id = deleteItem.item.id;\n      cache.writeQuery({\n        query: ALL_ITEMS_QUERY,\n        data: {\n          items: {\n            nodes: nodes.filter(function (node) {\n              return node.id !== id;\n            })\n          }\n        }\n      });\n    }\n  }),\n      _useMutation2 = _slicedToArray(_useMutation, 2),\n      deleteItem = _useMutation2[0],\n      deleteRes = _useMutation2[1];\n\n  if (error) return __jsx(\"p\", {\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 22,\n      columnNumber: 21\n    }\n  }, \"Error: \", error);\n\n  var handleClick = function handleClick(id) {\n    deleteItem({\n      variables: {\n        input: {\n          id: id\n        }\n      }\n    });\n  };\n\n  var items = [] || ((_data = data) === null || _data === void 0 ? void 0 : (_data$items = _data.items) === null || _data$items === void 0 ? void 0 : _data$items.nodes);\n\n  if (!loading && items.length > 0) {\n    return __jsx(List, {\n      width: \"60%\",\n      maxWidth: \"500px\",\n      minWidth: \"300px\",\n      margin: \"auto\",\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 31,\n        columnNumber: 7\n      }\n    }, __jsx(ListItem, {\n      paddingBottom: \"0.5rem\",\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 32,\n        columnNumber: 9\n      }\n    }, __jsx(SimpleGrid, {\n      columns: \"3\",\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 33,\n        columnNumber: 11\n      }\n    }, __jsx(Heading, {\n      as: \"h4\",\n      size: \"lg\",\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 34,\n        columnNumber: 13\n      }\n    }, \"Item\"), __jsx(Heading, {\n      as: \"h4\",\n      size: \"lg\",\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 37,\n        columnNumber: 13\n      }\n    }, \"Quantity\"))), items.map(function (item) {\n      return __jsx(Item, {\n        key: item.id + item.product,\n        id: item.id,\n        product: item.product,\n        quantity: item.quantity,\n        handleClick: handleClick,\n        __self: _this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 43,\n          columnNumber: 11\n        }\n      });\n    }));\n  } else {\n    return __jsx(Heading, {\n      as: \"h4\",\n      size: \"lg\",\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 55,\n        columnNumber: 7\n      }\n    }, \"No groceries.\");\n  }\n};\n\n_s(GroceryList, \"xR4djT1OOKXodRGzURB5rPGAB0w=\", false, function () {\n  return [useMutation];\n});\n\n_c = GroceryList;\nexport default GroceryList;\n\nvar _c;\n\n$RefreshReg$(_c, \"GroceryList\");","map":{"version":3,"sources":["F:/Work/Projects/Grocery List/frontend/components/GroceryList.js"],"names":["useQuery","useMutation","REMOVE_ITEM_MUTATION","ALL_ITEMS_QUERY","List","ListItem","SimpleGrid","Heading","Item","GroceryList","update","cache","deleteItem","data","readQuery","query","nodes","items","id","item","writeQuery","filter","node","deleteRes","error","handleClick","variables","input","loading","length","map","product","quantity"],"mappings":"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","sourcesContent":["import { useQuery, useMutation } from '@apollo/react-hooks';\nimport { REMOVE_ITEM_MUTATION } from '../lib/mutations';\nimport { ALL_ITEMS_QUERY } from '../lib/queries';\nimport { List, ListItem, SimpleGrid, Heading } from '@chakra-ui/core';\nimport Item from './Item';\n\nconst GroceryList = () => {\n  const [deleteItem, deleteRes] = useMutation(REMOVE_ITEM_MUTATION, {\n    update(cache, { data: { deleteItem } }) {\n      const {\n        items: { nodes }\n      } = cache.readQuery({ query: ALL_ITEMS_QUERY });\n\n      const { id } = deleteItem.item;\n      cache.writeQuery({\n        query: ALL_ITEMS_QUERY,\n        data: { items: { nodes: nodes.filter((node) => node.id !== id) } }\n      });\n    }\n  });\n\n  if (error) return <p>Error: {error}</p>;\n\n  const handleClick = (id) => {\n    deleteItem({ variables: { input: { id } } });\n  };\n  const items = [] || data?.items?.nodes;\n\n  if (!loading && items.length > 0) {\n    return (\n      <List width=\"60%\" maxWidth=\"500px\" minWidth=\"300px\" margin=\"auto\">\n        <ListItem paddingBottom=\"0.5rem\">\n          <SimpleGrid columns=\"3\">\n            <Heading as=\"h4\" size=\"lg\">\n              Item\n            </Heading>\n            <Heading as=\"h4\" size=\"lg\">\n              Quantity\n            </Heading>\n          </SimpleGrid>\n        </ListItem>\n        {items.map((item) => (\n          <Item\n            key={item.id + item.product}\n            id={item.id}\n            product={item.product}\n            quantity={item.quantity}\n            handleClick={handleClick}\n          />\n        ))}\n      </List>\n    );\n  } else {\n    return (\n      <Heading as=\"h4\" size=\"lg\">\n        No groceries.\n      </Heading>\n    );\n  }\n};\n\nexport default GroceryList;\n"]},"metadata":{},"sourceType":"module"}