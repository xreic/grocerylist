{"ast":null,"code":"import _slicedToArray from \"@babel/runtime/helpers/esm/slicedToArray\";\n\nvar _this = this,\n    _jsxFileName = \"F:\\\\Work\\\\Projects\\\\Grocery List\\\\frontend\\\\components\\\\GroceryList.js\",\n    _s = $RefreshSig$();\n\nimport React from \"react\";\nvar __jsx = React.createElement;\nimport { useQuery, useMutation } from '@apollo/react-hooks';\nimport { REMOVE_ITEM_MUTATION } from '../lib/mutations';\nimport { ALL_ITEMS_QUERY } from '../lib/queries';\nimport { List } from '@chakra-ui/core';\nimport Item from './Item';\n\nvar GroceryList = function GroceryList() {\n  _s();\n\n  var _useQuery = useQuery(ALL_ITEMS_QUERY),\n      data = _useQuery.data,\n      loading = _useQuery.loading,\n      error = _useQuery.error;\n\n  var _useMutation = useMutation(REMOVE_ITEM_MUTATION, {\n    update: function update(cache, _ref) {\n      var deleteItem = _ref.data.deleteItem;\n\n      var _cache$readQuery = cache.readQuery({\n        query: ALL_ITEMS_QUERY\n      }),\n          nodes = _cache$readQuery.items.nodes;\n\n      var id = deleteItem.item.id;\n      var data = nodes.filter(function (node) {\n        return node.id !== id;\n      });\n      console.log(data);\n      cache.writeQuery({\n        query: ALL_ITEMS_QUERY,\n        data: {\n          items: {\n            nodes: data\n          }\n        }\n      });\n    }\n  }),\n      _useMutation2 = _slicedToArray(_useMutation, 2),\n      deleteItem = _useMutation2[0],\n      deleteRes = _useMutation2[1];\n\n  if (error) return __jsx(\"p\", {\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 26,\n      columnNumber: 21\n    }\n  }, \"Error: \", error);\n  if (loading) return __jsx(\"p\", {\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 27,\n      columnNumber: 23\n    }\n  }, \"Loading\");\n\n  var handleClick = function handleClick(id) {\n    deleteItem({\n      variables: {\n        input: {\n          id: id\n        }\n      }\n    });\n  };\n\n  var items = data.items.nodes;\n  return __jsx(List, {\n    width: \"60%\",\n    margin: \"auto\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 35,\n      columnNumber: 5\n    }\n  }, items.map(function (item) {\n    return __jsx(Item, {\n      key: item.id + item.product,\n      id: item.id,\n      product: item.product,\n      quantity: item.quantity,\n      handleClick: handleClick,\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 37,\n        columnNumber: 9\n      }\n    });\n  }));\n};\n\n_s(GroceryList, \"E3tadQ8MiuQT+LlLPZg9RFtEKJI=\", false, function () {\n  return [useQuery, useMutation];\n});\n\n_c = GroceryList;\nexport default GroceryList;\n\nvar _c;\n\n$RefreshReg$(_c, \"GroceryList\");","map":{"version":3,"sources":["F:/Work/Projects/Grocery List/frontend/components/GroceryList.js"],"names":["useQuery","useMutation","REMOVE_ITEM_MUTATION","ALL_ITEMS_QUERY","List","Item","GroceryList","data","loading","error","update","cache","deleteItem","readQuery","query","nodes","items","id","item","filter","node","console","log","writeQuery","deleteRes","handleClick","variables","input","map","product","quantity"],"mappings":";;;;;;;;AAAA,SAASA,QAAT,EAAmBC,WAAnB,QAAsC,qBAAtC;AACA,SAASC,oBAAT,QAAqC,kBAArC;AACA,SAASC,eAAT,QAAgC,gBAAhC;AACA,SAASC,IAAT,QAAqB,iBAArB;AACA,OAAOC,IAAP,MAAiB,QAAjB;;AAEA,IAAMC,WAAW,GAAG,SAAdA,WAAc,GAAM;AAAA;;AAAA,kBACSN,QAAQ,CAACG,eAAD,CADjB;AAAA,MAChBI,IADgB,aAChBA,IADgB;AAAA,MACVC,OADU,aACVA,OADU;AAAA,MACDC,KADC,aACDA,KADC;;AAAA,qBAEQR,WAAW,CAACC,oBAAD,EAAuB;AAChEQ,IAAAA,MADgE,kBACzDC,KADyD,QACxB;AAAA,UAAhBC,UAAgB,QAAxBL,IAAwB,CAAhBK,UAAgB;;AAAA,6BAGlCD,KAAK,CAACE,SAAN,CAAgB;AAAEC,QAAAA,KAAK,EAAEX;AAAT,OAAhB,CAHkC;AAAA,UAE3BY,KAF2B,oBAEpCC,KAFoC,CAE3BD,KAF2B;;AAAA,UAK9BE,EAL8B,GAKvBL,UAAU,CAACM,IALY,CAK9BD,EAL8B;AAMtC,UAAMV,IAAI,GAAGQ,KAAK,CAACI,MAAN,CAAa,UAACC,IAAD;AAAA,eAAUA,IAAI,CAACH,EAAL,KAAYA,EAAtB;AAAA,OAAb,CAAb;AACAI,MAAAA,OAAO,CAACC,GAAR,CAAYf,IAAZ;AAEAI,MAAAA,KAAK,CAACY,UAAN,CAAiB;AACfT,QAAAA,KAAK,EAAEX,eADQ;AAEfI,QAAAA,IAAI,EAAE;AAAES,UAAAA,KAAK,EAAE;AAAED,YAAAA,KAAK,EAAER;AAAT;AAAT;AAFS,OAAjB;AAID;AAd+D,GAAvB,CAFnB;AAAA;AAAA,MAEjBK,UAFiB;AAAA,MAELY,SAFK;;AAmBxB,MAAIf,KAAJ,EAAW,OAAO;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,gBAAWA,KAAX,CAAP;AACX,MAAID,OAAJ,EAAa,OAAO;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,eAAP;;AAEb,MAAMiB,WAAW,GAAG,SAAdA,WAAc,CAACR,EAAD,EAAQ;AAC1BL,IAAAA,UAAU,CAAC;AAAEc,MAAAA,SAAS,EAAE;AAAEC,QAAAA,KAAK,EAAE;AAAEV,UAAAA,EAAE,EAAFA;AAAF;AAAT;AAAb,KAAD,CAAV;AACD,GAFD;;AAIA,MAAMD,KAAK,GAAGT,IAAI,CAACS,KAAL,CAAWD,KAAzB;AACA,SACE,MAAC,IAAD;AAAM,IAAA,KAAK,EAAC,KAAZ;AAAkB,IAAA,MAAM,EAAC,MAAzB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KACGC,KAAK,CAACY,GAAN,CAAU,UAACV,IAAD;AAAA,WACT,MAAC,IAAD;AACE,MAAA,GAAG,EAAEA,IAAI,CAACD,EAAL,GAAUC,IAAI,CAACW,OADtB;AAEE,MAAA,EAAE,EAAEX,IAAI,CAACD,EAFX;AAGE,MAAA,OAAO,EAAEC,IAAI,CAACW,OAHhB;AAIE,MAAA,QAAQ,EAAEX,IAAI,CAACY,QAJjB;AAKE,MAAA,WAAW,EAAEL,WALf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,MADS;AAAA,GAAV,CADH,CADF;AAaD,CAxCD;;GAAMnB,W;UAC6BN,Q,EACDC,W;;;KAF5BK,W;AA0CN,eAAeA,WAAf","sourcesContent":["import { useQuery, useMutation } from '@apollo/react-hooks';\nimport { REMOVE_ITEM_MUTATION } from '../lib/mutations';\nimport { ALL_ITEMS_QUERY } from '../lib/queries';\nimport { List } from '@chakra-ui/core';\nimport Item from './Item';\n\nconst GroceryList = () => {\n  const { data, loading, error } = useQuery(ALL_ITEMS_QUERY);\n  const [deleteItem, deleteRes] = useMutation(REMOVE_ITEM_MUTATION, {\n    update(cache, { data: { deleteItem } }) {\n      const {\n        items: { nodes }\n      } = cache.readQuery({ query: ALL_ITEMS_QUERY });\n\n      const { id } = deleteItem.item;\n      const data = nodes.filter((node) => node.id !== id);\n      console.log(data);\n\n      cache.writeQuery({\n        query: ALL_ITEMS_QUERY,\n        data: { items: { nodes: data } }\n      });\n    }\n  });\n\n  if (error) return <p>Error: {error}</p>;\n  if (loading) return <p>Loading</p>;\n\n  const handleClick = (id) => {\n    deleteItem({ variables: { input: { id } } });\n  };\n\n  const items = data.items.nodes;\n  return (\n    <List width=\"60%\" margin=\"auto\">\n      {items.map((item) => (\n        <Item\n          key={item.id + item.product}\n          id={item.id}\n          product={item.product}\n          quantity={item.quantity}\n          handleClick={handleClick}\n        />\n      ))}\n    </List>\n  );\n};\n\nexport default GroceryList;\n"]},"metadata":{},"sourceType":"module"}