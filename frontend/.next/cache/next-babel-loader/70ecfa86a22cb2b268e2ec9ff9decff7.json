{"ast":null,"code":"import _slicedToArray from \"@babel/runtime/helpers/esm/slicedToArray\";\nimport React from \"react\";\nvar __jsx = React.createElement;\n// Dependnencies\nimport { useMutation } from '@apollo/react-hooks'; // Helpers\n\nimport { REMOVE_ITEM_MUTATION } from '../lib/mutations';\nimport { ALL_ITEMS_QUERY } from '../lib/queries'; // Styles\n\nimport { List, ListItem, SimpleGrid, Heading } from '@chakra-ui/core'; // Components\n\nimport Item from './Item';\n\nvar GroceryList = function GroceryList(_ref) {\n  var items = _ref.items,\n      loading = _ref.loading,\n      error = _ref.error;\n\n  var _useMutation = useMutation(REMOVE_ITEM_MUTATION, {\n    update: function update(cache, _ref2) {\n      var deleteItem = _ref2.data.deleteItem;\n\n      var _cache$readQuery = cache.readQuery({\n        query: ALL_ITEMS_QUERY\n      }),\n          nodes = _cache$readQuery.items.nodes;\n\n      var id = deleteItem.item.id;\n      cache.writeQuery({\n        query: ALL_ITEMS_QUERY,\n        data: {\n          items: {\n            nodes: nodes.filter(function (node) {\n              return node.id !== id;\n            })\n          }\n        }\n      });\n    }\n  }),\n      _useMutation2 = _slicedToArray(_useMutation, 2),\n      deleteItem = _useMutation2[0],\n      deleteRes = _useMutation2[1];\n\n  var handleClick = function handleClick(id) {\n    deleteItem({\n      variables: {\n        input: {\n          id: id\n        }\n      }\n    });\n  };\n\n  if (error) return __jsx(\"p\", null, \"Error: \", error);\n\n  if (!loading && items && items.length > 0) {\n    return __jsx(List, {\n      width: \"60%\",\n      maxWidth: \"500px\",\n      minWidth: \"300px\",\n      margin: \"auto\"\n    }, __jsx(ListItem, {\n      paddingBottom: \"0.5rem\"\n    }, __jsx(SimpleGrid, {\n      columns: \"3\"\n    }, __jsx(Heading, {\n      as: \"h4\",\n      size: \"lg\"\n    }, \"Item\"), __jsx(Heading, {\n      as: \"h4\",\n      size: \"lg\"\n    }, \"Quantity\"))), items.map(function (item) {\n      return __jsx(Item, {\n        key: item.id + item.product,\n        id: item.id,\n        product: item.product,\n        quantity: item.quantity,\n        handleClick: handleClick\n      });\n    }));\n  } else {\n    return __jsx(Heading, {\n      as: \"h4\",\n      size: \"lg\"\n    }, \"No groceries.\");\n  }\n};\n\nexport default GroceryList;","map":null,"metadata":{},"sourceType":"module"}