{"ast":null,"code":"var __jsx = React.createElement;\n// Dependencies\nimport React, { useState, useRef } from 'react';\nimport { useMutation } from '@apollo/react-hooks';\nimport styled from '@emotion/styled'; // Styles\n\nimport { Box, Flex, Grid, Heading, Input, IconButton, Stack } from '@chakra-ui/core';\nimport { MdAddShoppingCart } from 'react-icons/md'; // Styled\n\nconst StyledInput = styled(Input)`\n  :disabled {\n    opacity: 1;\n  }\n`;\nconst StyledButton = styled(IconButton)`\n  :disabled {\n    opacity: 1;\n  }\n`; // Helpers\n\nimport { ADD_ITEM_MUTATION } from '../lib/mutations';\nimport { ALL_ITEMS_QUERY } from '../lib/queries';\n\nconst GroceryForm = () => {\n  const productRef = useRef('');\n  const quantityRef = useRef('');\n  const {\n    0: status,\n    1: setStatus\n  } = useState(false);\n  const [createItem, itemRes] = useMutation(ADD_ITEM_MUTATION, {\n    update(cache, {\n      data: {\n        createItem\n      }\n    }) {\n      const {\n        items: {\n          nodes\n        }\n      } = cache.readQuery({\n        query: ALL_ITEMS_QUERY\n      });\n      const item = createItem.item;\n      item['__typename'] = 'Item';\n      cache.writeQuery({\n        query: ALL_ITEMS_QUERY,\n        data: {\n          items: {\n            nodes: [item, ...nodes]\n          }\n        }\n      });\n    }\n\n  });\n\n  const handleSubmit = e => {\n    e.preventDefault();\n    setStatus(true);\n    const input = {\n      item: {\n        product: productRef.current.value,\n        quantity: parseInt(quantityRef.current.value)\n      }\n    };\n    createItem({\n      variables: {\n        input\n      }\n    });\n    setStatus(false);\n    productRef.current.value = '';\n    quantityRef.current.value = '';\n  };\n\n  return __jsx(Stack, {\n    spacing: \"2rem\"\n  }, __jsx(Heading, {\n    as: \"h1\",\n    size: \"lg\"\n  }, \"Add Items\"), __jsx(Flex, {\n    justify: \"center\",\n    paddingBottom: \"2rem\"\n  }, __jsx(\"form\", {\n    method: \"post\",\n    onSubmit: handleSubmit\n  }, __jsx(Grid, {\n    templateColumns: \"5fr 1fr\"\n  }, __jsx(Box, null, __jsx(StyledInput, {\n    type: \"text\",\n    placeholder: \"Product\",\n    isDisabled: status,\n    ref: productRef\n  }), __jsx(StyledInput, {\n    type: \"number\",\n    placeholder: \"Quantity\",\n    isDisabled: status,\n    ref: quantityRef\n  })), __jsx(StyledButton, {\n    type: \"submit\",\n    icon: MdAddShoppingCart,\n    isLoading: status,\n    isDisabled: status,\n    \"aira-busy\": status,\n    height: true\n  })))));\n};\n\nexport default GroceryForm;","map":null,"metadata":{},"sourceType":"module"}