{"ast":null,"code":"import ApolloClient, { InMemoryCache, HttpLink } from 'apollo-boost';\nimport Cookies from 'js-cookie';\n\nconst getToken = () => {\n  console.log(Cookies.get('grocerylist_auth_token'));\n  return Cookies.get('grocerylist_auth_token') ? Cookies.get('grocerylist_auth_token') : false;\n};\n\nexport default function createApolloClient(initialState, ctx) {\n  // The `ctx` (NextPageContext) will only be present on the server.\n  // use it to extract auth headers (ctx.req) or similar.\n  return new ApolloClient({\n    ssrMode: Boolean(ctx),\n    link: new HttpLink({\n      // includeExtensions: true,\n      uri: 'http://localhost:4000/graphiql',\n      // Server URL (must be absolute)\n      request: operation => {\n        const token = getToken();\n        operation.setContext({\n          headers: {\n            authorization: token ? `Bearer ${token}` : ''\n          }\n        });\n      }\n    }),\n    cache: new InMemoryCache({\n      addTypename: false\n    })\n  });\n}","map":{"version":3,"sources":["F:/Work/Projects/Grocery List/frontend/apolloClient.js"],"names":["ApolloClient","InMemoryCache","HttpLink","Cookies","getToken","console","log","get","createApolloClient","initialState","ctx","ssrMode","Boolean","link","uri","request","operation","token","setContext","headers","authorization","cache","addTypename"],"mappings":"AAAA,OAAOA,YAAP,IAAuBC,aAAvB,EAAsCC,QAAtC,QAAsD,cAAtD;AACA,OAAOC,OAAP,MAAoB,WAApB;;AAEA,MAAMC,QAAQ,GAAG,MAAM;AACrBC,EAAAA,OAAO,CAACC,GAAR,CAAYH,OAAO,CAACI,GAAR,CAAY,wBAAZ,CAAZ;AACA,SAAOJ,OAAO,CAACI,GAAR,CAAY,wBAAZ,IACHJ,OAAO,CAACI,GAAR,CAAY,wBAAZ,CADG,GAEH,KAFJ;AAGD,CALD;;AAOA,eAAe,SAASC,kBAAT,CAA4BC,YAA5B,EAA0CC,GAA1C,EAA+C;AAC5D;AACA;AACA,SAAO,IAAIV,YAAJ,CAAiB;AACtBW,IAAAA,OAAO,EAAEC,OAAO,CAACF,GAAD,CADM;AAEtBG,IAAAA,IAAI,EAAE,IAAIX,QAAJ,CAAa;AACjB;AACAY,MAAAA,GAAG,EAAE,gCAFY;AAEsB;AACvCC,MAAAA,OAAO,EAAGC,SAAD,IAAe;AACtB,cAAMC,KAAK,GAAGb,QAAQ,EAAtB;AACAY,QAAAA,SAAS,CAACE,UAAV,CAAqB;AACnBC,UAAAA,OAAO,EAAE;AACPC,YAAAA,aAAa,EAAEH,KAAK,GAAI,UAASA,KAAM,EAAnB,GAAuB;AADpC;AADU,SAArB;AAKD;AAVgB,KAAb,CAFgB;AActBI,IAAAA,KAAK,EAAE,IAAIpB,aAAJ,CAAkB;AACvBqB,MAAAA,WAAW,EAAE;AADU,KAAlB;AAde,GAAjB,CAAP;AAkBD","sourcesContent":["import ApolloClient, { InMemoryCache, HttpLink } from 'apollo-boost';\r\nimport Cookies from 'js-cookie';\r\n\r\nconst getToken = () => {\r\n  console.log(Cookies.get('grocerylist_auth_token'));\r\n  return Cookies.get('grocerylist_auth_token')\r\n    ? Cookies.get('grocerylist_auth_token')\r\n    : false;\r\n};\r\n\r\nexport default function createApolloClient(initialState, ctx) {\r\n  // The `ctx` (NextPageContext) will only be present on the server.\r\n  // use it to extract auth headers (ctx.req) or similar.\r\n  return new ApolloClient({\r\n    ssrMode: Boolean(ctx),\r\n    link: new HttpLink({\r\n      // includeExtensions: true,\r\n      uri: 'http://localhost:4000/graphiql', // Server URL (must be absolute)\r\n      request: (operation) => {\r\n        const token = getToken();\r\n        operation.setContext({\r\n          headers: {\r\n            authorization: token ? `Bearer ${token}` : ''\r\n          }\r\n        });\r\n      }\r\n    }),\r\n    cache: new InMemoryCache({\r\n      addTypename: false\r\n    })\r\n  });\r\n}\r\n"]},"metadata":{},"sourceType":"module"}