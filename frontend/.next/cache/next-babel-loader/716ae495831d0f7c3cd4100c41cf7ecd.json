{"ast":null,"code":"import { ApolloClient } from 'apollo-client';\nimport { InMemoryCache } from 'apollo-cache-inmemory';\nimport { HttpLink } from 'apollo-link-http';\nimport Cookies from 'js-cookie';\n\nconst getToken = () => {\n  return Cookies.get('grocerylist_auth_token') || \" \";\n};\n\nexport default function createApolloClient(initialState, ctx) {\n  // The `ctx` (NextPageContext) will only be present on the server.\n  // use it to extract auth headers (ctx.req) or similar.\n  return new ApolloClient({\n    ssrMode: Boolean(ctx),\n    link: new HttpLink({\n      // includeExtensions: true,\n      uri: 'http://localhost:4000/graphql',\n      // Server URL (must be absolute)\n      credentials: 'same-origin',\n      // Additional fetch() options like `credentials` or `headers`\n      headers: {\n        Authorization: getToken()\n      }\n    }),\n    cache: new InMemoryCache({\n      addTypename: false\n    })\n  });\n}","map":{"version":3,"sources":["F:/Work/Projects/Grocery List/frontend/apolloClient.js"],"names":["ApolloClient","InMemoryCache","HttpLink","Cookies","getToken","get","createApolloClient","initialState","ctx","ssrMode","Boolean","link","uri","credentials","headers","Authorization","cache","addTypename"],"mappings":"AAAA,SAASA,YAAT,QAA6B,eAA7B;AACA,SAASC,aAAT,QAA8B,uBAA9B;AACA,SAASC,QAAT,QAAyB,kBAAzB;AACA,OAAOC,OAAP,MAAoB,WAApB;;AAEA,MAAMC,QAAQ,GAAG,MAAM;AACrB,SAAOD,OAAO,CAACE,GAAR,CAAY,wBAAZ,KAAyC,GAAhD;AACD,CAFD;;AAIA,eAAe,SAASC,kBAAT,CAA4BC,YAA5B,EAA0CC,GAA1C,EAA+C;AAC5D;AACA;AACA,SAAO,IAAIR,YAAJ,CAAiB;AACtBS,IAAAA,OAAO,EAAEC,OAAO,CAACF,GAAD,CADM;AAEtBG,IAAAA,IAAI,EAAE,IAAIT,QAAJ,CAAa;AACjB;AACAU,MAAAA,GAAG,EAAE,+BAFY;AAEqB;AACtCC,MAAAA,WAAW,EAAE,aAHI;AAGW;AAC5BC,MAAAA,OAAO,EAAE;AAAEC,QAAAA,aAAa,EAAEX,QAAQ;AAAzB;AAJQ,KAAb,CAFgB;AAQtBY,IAAAA,KAAK,EAAE,IAAIf,aAAJ,CAAkB;AACvBgB,MAAAA,WAAW,EAAE;AADU,KAAlB;AARe,GAAjB,CAAP;AAYD","sourcesContent":["import { ApolloClient } from 'apollo-client';\r\nimport { InMemoryCache } from 'apollo-cache-inmemory';\r\nimport { HttpLink } from 'apollo-link-http';\r\nimport Cookies from 'js-cookie';\r\n\r\nconst getToken = () => {\r\n  return Cookies.get('grocerylist_auth_token') || \" \";\r\n};\r\n\r\nexport default function createApolloClient(initialState, ctx) {\r\n  // The `ctx` (NextPageContext) will only be present on the server.\r\n  // use it to extract auth headers (ctx.req) or similar.\r\n  return new ApolloClient({\r\n    ssrMode: Boolean(ctx),\r\n    link: new HttpLink({\r\n      // includeExtensions: true,\r\n      uri: 'http://localhost:4000/graphql', // Server URL (must be absolute)\r\n      credentials: 'same-origin', // Additional fetch() options like `credentials` or `headers`\r\n      headers: { Authorization: getToken() }\r\n    }),\r\n    cache: new InMemoryCache({\r\n      addTypename: false\r\n    })\r\n  });\r\n}\r\n"]},"metadata":{},"sourceType":"module"}